<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.freeBoard.mapper.FreeBoardMapper">
	
	<!-- 자유게시판 목록
	map{"currentPage":2}
	-->
	<select id="list" parameterType="hashMap" resultType="freeBoardVO">
		WITH T AS(
			SELECT ROWNUM RNUM , F.FREE_NO , F.FREE_TITLE , F.FREE_WRITER , F.PARENT_NO , F.LVL
			FROM
			(
			    SELECT FREE_NO ,
			           LPAD('ㄴ', 2*(LEVEL-1),'ㄴ')|| FREE_TITLE FREE_TITLE ,
			           FREE_WRITER,
			           PARENT_NO,
			           LEVEL LVL
			    FROM FREE_BOARD
			    START WITH PARENT_NO IS NULL
			    -- 시작점 설정 => PARENT_ID 값이 NULL이다
			    CONNECT BY PRIOR FREE_NO = PARENT_NO
			    ) F
			)
			SELECT * FROM T
			WHERE T.RNUM BETWEEN (#{currentPage} * 10) - (10 - 1) AND (#{currentPage} * 10)
	</select>
	
</mapper>