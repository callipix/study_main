<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.mapper.ContactMapper">
	<insert id="insert" parameterType="contactInfoVO">
		<selectKey resultType="String" order="BEFORE" keyProperty="ciCd">
			SELECT NVL(SUBSTR(MAX(CI_CD),1,3) || TRIM(TO_CHAR(SUBSTR(MAX(CI_CD),4)+1,'000')),'CI001')
			  FROM contact_info
		</selectKey>
		insert into contact_info (CI_CD, CI_NAME, CI_MAIL, CI_SUBJ, CI_IMG_URL, CI_MESG, CI_REG_DT, REGISTER_ID, REGIST_DT)
		values(#{ciCd} ,#{ciName} , #{ciMail} , #{ciSubj} , #{ciImgUrl} ,#{ciMesg} , #{ciRegDt} , #{registerId} , sysdate)
	</insert>

</mapper>